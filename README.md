# 简约导航站 - 本地API版本

## 🎉 项目概览
一个使用 React + Express.js + Tailwind CSS 构建的简约风格网站导航平台，具有现代化的用户界面和完整的编辑功能。支持本地API服务器管理数据，可以添加、编辑、删除网站。

## ✅ 完成功能

### 1. 核心功能
- ✅ **分类导航**: 9个主要分类（新闻、教育、电影、阅读、演讲、搞笑、购物、音乐、医疗）
- ✅ **网站卡片**: 精选网站展示，每个都有图标、描述和访问链接
- ✅ **搜索功能**: 实时搜索网站名称和描述
- ✅ **编辑功能**: 支持添加、编辑、删除网站（本地API版本）
- ✅ **数据持久化**: 数据保存到本地JSON文件
- ✅ **本地存储**: 记住用户选择的分类

### 2. 用户界面
- ✅ **响应式设计**: 支持手机、平板、桌面端
- ✅ **纯白简约主题**: 干净的白色背景配色
- ✅ **卡片式布局**: 现代化的卡片展示方式
- ✅ **动画效果**: 悬停、点击、加载动画
- ✅ **标签切换动画**: 流畅的分类切换体验

### 3. 技术特性
- ✅ **React Hooks**: 使用现代 React 开发模式
- ✅ **Express.js API**: 本地服务器提供REST API接口
- ✅ **Tailwind CSS**: 原子化CSS框架
- ✅ **本地SVG图标**: 所有图标都是本地生成的SVG
- ✅ **防抖搜索**: 优化搜索性能
- ✅ **错误边界**: 处理组件错误
- ✅ **加载状态**: 骨架屏加载效果

### 4. 用户体验优化
- ✅ **回到顶部按钮**: 滚动时自动显示
- ✅ **空状态处理**: 友好的空搜索结果提示
- ✅ **加载动画**: 平滑的内容加载体验
- ✅ **关键字高亮**: 搜索结果反馈
- ✅ **网站统计**: 底部显示收录网站数量

## 📂 项目结构

```
simple-nav-site/
├── package.json              # 项目配置和依赖
├── server.js                 # Express.js 服务器
├── update-server.sh          # 更新服务器版本脚本
├── create-server-branch.sh   # 创建服务器分支脚本
├── CHANGELOG.md              # 版本变更日志
├── tailwind.config.js        # Tailwind CSS 配置
├── postcss.config.js         # PostCSS 配置
├── build/                    # 生产构建文件
├── public/
│   ├── index.html            # HTML 模板
│   └── icons/                # 本地 SVG 图标
└── src/
    ├── index.js             # React 入口文件
    ├── index.css            # 全局样式和动画
    ├── App.js               # 主应用组件
    ├── components.js        # 可复用组件
    ├── EditComponents.js    # 编辑功能组件
    ├── hooks.js             # 自定义 React Hooks
    ├── data.json            # 网站数据（API服务器修改此文件）
    └── hooks/
        └── useLocalAPI.js   # 本地API管理Hook
```

## 🚀 如何启动项目

### 环境要求
- Node.js 14.0 或更高版本
- npm 6.0 或更高版本

### 快速开始

#### 1. 安装依赖
```bash
npm install
```

#### 2. 启动后端服务器（必须先启动）
```bash
# 启动Express API服务器
node server.js
```
服务器将启动在 http://localhost:15001

#### 3. 启动前端开发服务器（新终端窗口）
```bash
# 启动React开发服务器
npm start
```
前端将启动在 http://localhost:3000

#### 4. 访问应用
打开浏览器访问 http://localhost:3000

### 一键启动（推荐）
如果安装了 concurrently，可以同时启动前后端：
```bash
# 安装 concurrently（首次运行）
npm install -g concurrently

# 同时启动前后端
npm run dev
```

## 📊 分支管理

本项目使用两个分支进行管理：

1. **`local-api-version`** - 开发分支
   - 包含完整的源代码、构建工具和开发依赖
   - 用于开发和测试

2. **`server-deploy`** - 服务器部署分支
   - 仅包含运行所需的最小文件集
   - 优化的服务器部署版本

### 部署脚本说明

项目提供了两个部署脚本：

1. **`update-server.sh`** - 更新服务器版本
   - 构建最新前端代码
   - 自动增加版本号
   - 将必要文件同步到服务器分支
   - 生成更新日志和部署说明

2. **`create-server-branch.sh`** - 创建新的服务器分支
   - 用于首次创建服务器部署分支
   - 或需要重置服务器分支时使用

## 🚀 生产环境部署

### 方法一：使用更新脚本（日常更新推荐）

这个脚本会自动构建项目并将需要的文件同步到服务器分支。

```bash
# 使脚本可执行
chmod +x update-server.sh

# 运行更新脚本
./update-server.sh
```

推送到远程仓库:
```bash
git push origin server-deploy --force
```

### 方法二：创建新的服务器分支（首次部署推荐）

适用于首次部署或需要重置服务器分支的情况。

```bash
# 使脚本可执行
chmod +x create-server-branch.sh

# 运行创建脚本
./create-server-branch.sh
```

推送到远程仓库:
```bash
git push origin server-deploy --force
```

### 方法三：手动部署

1. 构建前端
```bash
npm run build
```

2. 将构建文件复制到服务器
3. 安装生产依赖
```bash
npm install --production
```

4. 启动服务器
```bash
# 直接启动
node server.js

# 或使用 PM2 管理
pm2 start server.js --name nav-site
```

#### 3. 生产环境启动
```bash
# 直接启动
node server.js

# 或使用 PM2（推荐）
npm install -g pm2
pm2 start server.js --name simple-nav-site
```

### 编辑功能使用

#### 激活编辑模式
有多种方式可以激活编辑模式：

1. **URL参数**：在地址栏添加 `?edit=1`
   - 例如：`http://localhost:3000?edit=1`

2. **快捷键**：
   - 按 `Ctrl+E`（Windows/Linux）或 `Cmd+E`（Mac）

3. **连续按键**：
   - 连续快速按3次字母 `E`

4. **长按标题**：
   - 长按页面标题"简约导航站"3秒

#### 编辑操作
- **添加网站**：编辑模式下点击右下角绿色"+"按钮
- **编辑网站**：编辑模式下点击网站卡片上的编辑按钮
- **删除网站**：编辑模式下点击网站卡片上的删除按钮

### API接口文档

#### 获取所有数据
```
GET /api/data
```

#### 添加网站
```
POST /api/sites
Content-Type: application/json

{
  "name": "网站名称",
  "url": "https://example.com",
  "description": "网站描述",
  "categoryId": 1,
  "icon": "/icons/default.svg"
}
```

#### 更新网站
```
PUT /api/sites/:id
Content-Type: application/json

{
  "name": "新网站名称",
  "url": "https://newexample.com",
  "description": "新描述",
  "categoryId": 2
}
```

#### 删除网站
```
DELETE /api/sites/:id
```

#### 健康检查
```
GET /api/health
```

## 🎨 设计特色

### 1. 纯白简约风格
- 白色背景主题
- 简洁的排版布局
- 清晰的视觉层次

### 2. 流畅动画效果
- 卡片悬停效果
- 分类切换动画
- 页面加载动画
- 滚动懒加载

### 3. 响应式设计
- 移动端友好
- 平板适配
- 桌面端优化

## 📊 网站数据

### 分类统计
- 📰 **新闻** (3个网站): 新浪新闻、腾讯新闻、网易新闻
- 📚 **教育** (3个网站): 中国大学MOOC、学堂在线、Coursera
- 🎬 **电影** (3个网站): 豆瓣电影、时光网、爱奇艺
- 📖 **阅读** (3个网站): 豆瓣读书、微信读书、起点中文网
- 🎤 **演讲** (3个网站): TED、一席、罗辑思维
- 😄 **搞笑** (3个网站): B站、知乎、微博
- 🛒 **购物** (3个网站): 淘宝、京东、天猫
- 🎵 **音乐** (3个网站): 网易云音乐、QQ音乐、酷狗音乐
- 🏥 **医疗** (3个网站): 丁香园、春雨医生、好大夫在线

**总计**: 9个分类，29个精选网站（包含新增的测试网站）

## 🔧 技术架构

### 前端技术栈
- **React 18**: 现代化前端框架
- **Tailwind CSS**: 原子化CSS框架
- **自定义Hooks**: 数据管理和状态逻辑

### 后端技术栈  
- **Express.js**: 轻量级Node.js服务器
- **fs-extra**: 文件系统操作
- **CORS**: 跨域资源共享支持

### 数据存储
- **JSON文件**: 简单的文件数据库
- **实时同步**: API操作直接修改JSON文件
- **数据持久化**: 所有编辑操作永久保存

## 🔧 技术亮点

### 1. 性能优化
- **API缓存**: useLocalAPI Hook缓存数据减少请求
- **防抖搜索**: 300ms 防抖避免频繁搜索
- **本地存储**: 记住用户偏好设置
- **组件懒加载**: 编辑组件按需加载

### 2. 用户体验
- **加载状态**: 骨架屏提供视觉反馈
- **错误处理**: 完善的错误边界和提示
- **编辑模式**: 多种激活方式，操作简便
- **实时反馈**: 编辑操作立即生效

### 3. 开发体验
- **模块化**: 组件、Hook、API分离
- **类型安全**: 完善的数据验证
- **热重载**: 开发环境自动刷新
- **部署脚本**: 一键部署支持

## 🌟 项目特色

1. **完整的编辑功能**: 支持添加、编辑、删除网站，数据实时保存
2. **本地API架构**: Express.js提供RESTful API，无需外部数据库
3. **多种编辑激活方式**: URL参数、快捷键、连续按键、长按标题
4. **紧凑的UI设计**: 优化的导航栏和4列网格布局
5. **生产就绪**: 包含完整的构建和部署脚本

## 📱 访问地址

- **前端开发服务器**: http://localhost:3000
- **后端API服务器**: http://localhost:15001
- **API文档**: http://localhost:15001/api/health
- **生产构建**: 使用 `npm run build` 后部署

## 🚨 注意事项

1. **启动顺序**: 必须先启动后端服务器，再启动前端
2. **端口占用**: 确保15001（后端）和3000（前端）端口未被占用
3. **数据备份**: 编辑功能会直接修改 `src/data.json` 文件，建议定期备份
4. **生产部署**: 生产环境需要修改 `useLocalAPI.js` 中的API地址

## 🎯 功能特性

### 已完成功能
- ✅ **网站管理**: 完整的增删改查功能
- ✅ **分类管理**: 9个主要分类导航
- ✅ **搜索功能**: 实时搜索网站名称和描述
- ✅ **数据持久化**: 本地JSON文件存储
- ✅ **响应式设计**: 适配各种设备尺寸
- ✅ **编辑模式**: 多种激活方式
- ✅ **API接口**: RESTful API设计

### 可扩展功能
- [ ] 用户认证系统
- [ ] 网站分组功能
- [ ] 批量导入导出
- [ ] 网站图标自动获取
- [ ] 访问统计功能
- [ ] 深色主题模式
- [ ] 多语言支持
- [ ] 云端数据同步

---

**项目状态**: ✅ 生产就绪
**最后更新**: 2025年7月2日  
**技术栈**: React + Express.js + Tailwind CSS
**架构**: 前后端分离 + 本地API + JSON数据库
**设计风格**: 简约、现代、响应式
**当前版本**: v1.0.0（2025-07-02 发布）

## 📦 发布信息

### 最新版本：v1.0.0 (2025-07-02)

本版本为正式发布版，包含以下重要更新：

1. ✨ **UI改进**: 
   - 优化网站卡片布局，使卡片更紧凑
   - 增加每行显示的卡片数量，提高空间利用率
   - 改进导航栏中数字标签的可见性

2. 🔧 **API连接**:
   - 优化API连接配置，支持自动切换生产/开发环境
   - 增强API错误处理机制
   - 添加本地数据备份机制

3. 📄 **部署文档**:
   - 新增详细的部署指南 (DEPLOYMENT.md)
   - 更新快速启动说明 (QUICKSTART.md)
   - 添加构建验证工具 (verify-build.sh)

## 🛠 服务器配置

### 端口配置
服务器默认使用 **15001** 端口。如需修改，请在 `server.js` 文件中更改 `PORT` 常量值。

### 版本管理
项目在 `server.js` 文件顶部包含版本和更新日期信息：
```javascript
// 最后更新日期: 2025年7月3日
// 服务器版本: 1.0.1
```

每次使用 `update-server.sh` 脚本部署时，会自动:
1. 更新日期为当前日期
2. 将版本号的第三位（补丁版本）加1

## 📝 维护说明

### 添加新网站
1. 修改 `src/data.json` 文件，按照现有格式添加新网站
2. 将网站图标保存到 `public/icons/` 目录（SVG格式）
3. 重新构建并部署

### 修改分类
当前支持9个分类，如需修改分类名称或添加新分类：
1. 编辑 `src/data.json` 中的分类配置
2. 将分类图标添加到 `public/icons/` 目录
3. 重新构建并部署
